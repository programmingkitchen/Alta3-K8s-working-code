2022-07-10 22:35:34,320 p=12901 u=student n=ansible | PLAY [connectivity and fact gathering] **********************************************************************************************
2022-07-10 22:35:37,056 p=12901 u=student n=ansible | TASK [Gathering Facts] **************************************************************************************************************
2022-07-10 22:35:37,057 p=12901 u=student n=ansible | ok: [node-2]
2022-07-10 22:35:37,076 p=12901 u=student n=ansible | ok: [controller]
2022-07-10 22:35:37,134 p=12901 u=student n=ansible | ok: [node-1]
2022-07-10 22:35:37,259 p=12901 u=student n=ansible | ok: [bchd]
2022-07-10 22:35:37,316 p=12901 u=student n=ansible | PLAY [make certs & gen configs] *****************************************************************************************************
2022-07-10 22:35:38,480 p=12901 u=student n=ansible | TASK [Gathering Facts] **************************************************************************************************************
2022-07-10 22:35:38,480 p=12901 u=student n=ansible | ok: [localhost]
2022-07-10 22:35:39,016 p=12901 u=student n=ansible | TASK [make_certs : Create cert directories] *****************************************************************************************
2022-07-10 22:35:39,017 p=12901 u=student n=ansible | changed: [localhost] => (item=/home/student/k8s-certs)
2022-07-10 22:35:39,263 p=12901 u=student n=ansible | changed: [localhost] => (item=/home/student/k8s-config)
2022-07-10 22:35:39,551 p=12901 u=student n=ansible | changed: [localhost] => (item=/home/student/k8s-config/csr/)
2022-07-10 22:35:40,837 p=12901 u=student n=ansible | TASK [make_certs : Install dependencies with get_url -> cfssl, cfssljson, kubectl] **************************************************
2022-07-10 22:35:40,837 p=12901 u=student n=ansible | changed: [localhost] => (item={'url': 'https://github.com/cloudflare/cfssl/releases/download/v1.6.1/cfssl_1.6.1_linux_amd64', 'dest': '/usr/local/bin/cfssl', 'mode': '0755'})
2022-07-10 22:35:41,755 p=12901 u=student n=ansible | changed: [localhost] => (item={'url': 'https://github.com/cloudflare/cfssl/releases/download/v1.6.1/cfssljson_1.6.1_linux_amd64', 'dest': '/usr/local/bin/cfssljson', 'mode': '0755'})
2022-07-10 22:35:43,114 p=12901 u=student n=ansible | changed: [localhost] => (item={'url': 'https://storage.googleapis.com/kubernetes-release/release/v1.23.4/bin/linux/amd64/kubectl', 'dest': '/usr/local/bin/kubectl', 'mode': '0755'})
2022-07-10 22:35:44,159 p=12901 u=student n=ansible | TASK [make_certs : Deploy configuration templates] **********************************************************************************
2022-07-10 22:35:44,159 p=12901 u=student n=ansible | changed: [localhost] => (item=ca-config)
2022-07-10 22:35:44,675 p=12901 u=student n=ansible | TASK [make_certs : Deploy certificate generation (csr) templates] *******************************************************************
2022-07-10 22:35:44,676 p=12901 u=student n=ansible | changed: [localhost] => (item=ca)
2022-07-10 22:35:45,202 p=12901 u=student n=ansible | changed: [localhost] => (item=admin)
2022-07-10 22:35:45,634 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-controller-manager)
2022-07-10 22:35:46,139 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-proxy)
2022-07-10 22:35:46,667 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-scheduler)
2022-07-10 22:35:47,207 p=12901 u=student n=ansible | changed: [localhost] => (item=service-account)
2022-07-10 22:35:47,757 p=12901 u=student n=ansible | changed: [localhost] => (item=kubernetes)
2022-07-10 22:35:48,264 p=12901 u=student n=ansible | changed: [localhost] => (item=registry-web)
2022-07-10 22:35:48,734 p=12901 u=student n=ansible | changed: [localhost] => (item=front-proxy-client)
2022-07-10 22:35:49,220 p=12901 u=student n=ansible | TASK [make_certs : Generate misc service configuration templates] *******************************************************************
2022-07-10 22:35:49,220 p=12901 u=student n=ansible | changed: [localhost] => (item={'src': '/home/student/git/kubernetes-the-alta3-way/roles/make_certs/templates/kube-scheduler.yaml.j2', 'dest': '/home/student/k8s-config/kube-scheduler.yaml'})
2022-07-10 22:35:49,780 p=12901 u=student n=ansible | TASK [make_certs : Generate the certificate config file for nodes (file same on all nodes)] *****************************************
2022-07-10 22:35:49,781 p=12901 u=student n=ansible | changed: [localhost] => (item=node-1)
2022-07-10 22:35:50,266 p=12901 u=student n=ansible | changed: [localhost] => (item=node-2)
2022-07-10 22:35:51,338 p=12901 u=student n=ansible | TASK [make_certs : Generate a self-signed CA cert and private key for the k8s cloud] ************************************************
2022-07-10 22:35:51,339 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:52,007 p=12901 u=student n=ansible | TASK [make_certs : Generate Certificate and private key for k8s API server and etcd] ************************************************
2022-07-10 22:35:52,008 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:52,629 p=12901 u=student n=ansible | TASK [make_certs : Generate admin certificates] *************************************************************************************
2022-07-10 22:35:52,631 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:53,460 p=12901 u=student n=ansible | TASK [make_certs : Generate kube-controller-manager client cert and private key] ****************************************************
2022-07-10 22:35:53,462 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:54,398 p=12901 u=student n=ansible | TASK [make_certs : Generate kube-proxy client cert and private key] *****************************************************************
2022-07-10 22:35:54,399 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:55,582 p=12901 u=student n=ansible | TASK [make_certs : Generate kube-scheduler client cert and private key] *************************************************************
2022-07-10 22:35:55,582 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:57,096 p=12901 u=student n=ansible | TASK [make_certs : Generate service-account client cert and private key] ************************************************************
2022-07-10 22:35:57,100 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:57,942 p=12901 u=student n=ansible | TASK [make_certs : Generate registry web cert and private key] **********************************************************************
2022-07-10 22:35:57,943 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:59,105 p=12901 u=student n=ansible | TASK [make_certs : Generate front-proxy-client (kube-apiserver aggregation layer) cert and private key] *****************************
2022-07-10 22:35:59,106 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:35:59,677 p=12901 u=student n=ansible | TASK [make_certs : Generate the specific certificate and Private key for each node when it does not already exist] ******************
2022-07-10 22:35:59,678 p=12901 u=student n=ansible | changed: [localhost] => (item=node-1)
2022-07-10 22:36:00,681 p=12901 u=student n=ansible | changed: [localhost] => (item=node-2)
2022-07-10 22:36:00,953 p=12901 u=student n=ansible | TASK [make_certs : Discover if encryption config has already been generated] ********************************************************
2022-07-10 22:36:00,954 p=12901 u=student n=ansible | ok: [localhost]
2022-07-10 22:36:01,283 p=12901 u=student n=ansible | TASK [make_certs : Generate an encryption key] **************************************************************************************
2022-07-10 22:36:01,284 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:36:01,841 p=12901 u=student n=ansible | TASK [make_certs : Generate the encryption config file] *****************************************************************************
2022-07-10 22:36:01,842 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:36:02,138 p=12901 u=student n=ansible | TASK [make_certs : Create symbolic links to all generated certificates (k8s best practice names)] ***********************************
2022-07-10 22:36:02,139 p=12901 u=student n=ansible | changed: [localhost] => (item=ca)
2022-07-10 22:36:02,419 p=12901 u=student n=ansible | changed: [localhost] => (item=admin)
2022-07-10 22:36:02,712 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-controller-manager)
2022-07-10 22:36:02,975 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-proxy)
2022-07-10 22:36:03,252 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-scheduler)
2022-07-10 22:36:03,539 p=12901 u=student n=ansible | changed: [localhost] => (item=service-account)
2022-07-10 22:36:03,820 p=12901 u=student n=ansible | changed: [localhost] => (item=kubernetes)
2022-07-10 22:36:04,071 p=12901 u=student n=ansible | changed: [localhost] => (item=registry-web)
2022-07-10 22:36:04,335 p=12901 u=student n=ansible | changed: [localhost] => (item=front-proxy-client)
2022-07-10 22:36:04,724 p=12901 u=student n=ansible | TASK [make_certs : Create symbolic links to all generated keys (k8s best practice names)] *******************************************
2022-07-10 22:36:04,725 p=12901 u=student n=ansible | changed: [localhost] => (item=ca)
2022-07-10 22:36:05,016 p=12901 u=student n=ansible | changed: [localhost] => (item=admin)
2022-07-10 22:36:05,302 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-controller-manager)
2022-07-10 22:36:05,582 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-proxy)
2022-07-10 22:36:05,825 p=12901 u=student n=ansible | changed: [localhost] => (item=kube-scheduler)
2022-07-10 22:36:06,091 p=12901 u=student n=ansible | changed: [localhost] => (item=service-account)
2022-07-10 22:36:06,344 p=12901 u=student n=ansible | changed: [localhost] => (item=kubernetes)
2022-07-10 22:36:06,595 p=12901 u=student n=ansible | changed: [localhost] => (item=registry-web)
2022-07-10 22:36:06,851 p=12901 u=student n=ansible | changed: [localhost] => (item=front-proxy-client)
2022-07-10 22:36:07,312 p=12901 u=student n=ansible | TASK [kube_config : Setup the config file for each node] ****************************************************************************
2022-07-10 22:36:07,313 p=12901 u=student n=ansible | changed: [localhost] => (item=node-1)
2022-07-10 22:36:07,644 p=12901 u=student n=ansible | changed: [localhost] => (item=node-2)
2022-07-10 22:36:08,058 p=12901 u=student n=ansible | TASK [kube_config : Setup the credentials for each node] ****************************************************************************
2022-07-10 22:36:08,058 p=12901 u=student n=ansible | changed: [localhost] => (item=node-1)
2022-07-10 22:36:08,420 p=12901 u=student n=ansible | changed: [localhost] => (item=node-2)
2022-07-10 22:36:08,784 p=12901 u=student n=ansible | TASK [kube_config : Setup the context default for each node] ************************************************************************
2022-07-10 22:36:08,785 p=12901 u=student n=ansible | changed: [localhost] => (item=node-1)
2022-07-10 22:36:09,136 p=12901 u=student n=ansible | changed: [localhost] => (item=node-2)
2022-07-10 22:36:09,511 p=12901 u=student n=ansible | TASK [kube_config : Setup the use-context default for each node] ********************************************************************
2022-07-10 22:36:09,511 p=12901 u=student n=ansible | changed: [localhost] => (item=node-1)
2022-07-10 22:36:09,834 p=12901 u=student n=ansible | changed: [localhost] => (item=node-2)
2022-07-10 22:36:10,266 p=12901 u=student n=ansible | TASK [kube_config : auth kubeconfig files - multiple services - create] *************************************************************
2022-07-10 22:36:10,267 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-proxy.kubeconfig)
2022-07-10 22:36:10,585 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-controller-manager.kubeconfig)
2022-07-10 22:36:10,902 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-scheduler.kubeconfig)
2022-07-10 22:36:11,194 p=12901 u=student n=ansible | changed: [localhost] => (item=config=admin.kubeconfig)
2022-07-10 22:36:11,625 p=12901 u=student n=ansible | TASK [kube_config : auth kubeconfig - multiple services - set credentials] **********************************************************
2022-07-10 22:36:11,626 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-proxy.kubeconfig)
2022-07-10 22:36:12,002 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-controller-manager.kubeconfig)
2022-07-10 22:36:12,335 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-scheduler.kubeconfig)
2022-07-10 22:36:12,607 p=12901 u=student n=ansible | changed: [localhost] => (item=config=admin.kubeconfig)
2022-07-10 22:36:12,982 p=12901 u=student n=ansible | TASK [kube_config : auth kubeconfig - multiple services - set context] **************************************************************
2022-07-10 22:36:12,984 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-proxy.kubeconfig)
2022-07-10 22:36:13,286 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-controller-manager.kubeconfig)
2022-07-10 22:36:13,669 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-scheduler.kubeconfig)
2022-07-10 22:36:13,992 p=12901 u=student n=ansible | changed: [localhost] => (item=config=admin.kubeconfig)
2022-07-10 22:36:14,434 p=12901 u=student n=ansible | TASK [kube_config : auth kubeconfig - muiltiple services - use context] *************************************************************
2022-07-10 22:36:14,435 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-proxy.kubeconfig)
2022-07-10 22:36:14,723 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-controller-manager.kubeconfig)
2022-07-10 22:36:15,034 p=12901 u=student n=ansible | changed: [localhost] => (item=config=kube-scheduler.kubeconfig)
2022-07-10 22:36:15,366 p=12901 u=student n=ansible | changed: [localhost] => (item=config=admin.kubeconfig)
2022-07-10 22:36:18,316 p=12901 u=student n=ansible | TASK [localhost_config : Download and unarchive Helm] *******************************************************************************
2022-07-10 22:36:18,317 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:36:18,658 p=12901 u=student n=ansible | TASK [localhost_config : bchd-k8s-config - setup localhost loadbalancer for kubectl (as admin)] *************************************
2022-07-10 22:36:18,660 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:36:18,986 p=12901 u=student n=ansible | TASK [localhost_config : bchd-k8s-config - setup creds for admin user] **************************************************************
2022-07-10 22:36:18,987 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:36:19,366 p=12901 u=student n=ansible | TASK [localhost_config : bchd-k8s-config - setup context for the admin user] ********************************************************
2022-07-10 22:36:19,366 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:36:19,701 p=12901 u=student n=ansible | TASK [localhost_config : bchd-k8s-config - setup use-context for the admin user] ****************************************************
2022-07-10 22:36:19,702 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:36:21,205 p=12901 u=student n=ansible | TASK [localhost_config : ensure j2cli installed for setup functions] ****************************************************************
2022-07-10 22:36:21,206 p=12901 u=student n=ansible | ok: [localhost]
2022-07-10 22:36:21,551 p=12901 u=student n=ansible | TASK [localhost_config : setup setup] ***********************************************************************************************
2022-07-10 22:36:21,552 p=12901 u=student n=ansible | ok: [localhost] => (item={'src': '/home/student/git/kubernetes-the-alta3-way/labs/setup/setup', 'dest': '/home/student/.local/bin/setup'})
2022-07-10 22:36:21,820 p=12901 u=student n=ansible | ok: [localhost] => (item={'src': '/home/student/git/kubernetes-the-alta3-way/labs/setup/tl', 'dest': '/home/student/.local/bin/tl'})
2022-07-10 22:36:21,891 p=12901 u=student n=ansible | PLAY [deploy etcd] ******************************************************************************************************************
2022-07-10 22:36:23,040 p=12901 u=student n=ansible | TASK [Gathering Facts] **************************************************************************************************************
2022-07-10 22:36:23,041 p=12901 u=student n=ansible | ok: [controller]
2022-07-10 22:36:23,522 p=12901 u=student n=ansible | TASK [etcd : Create etcd directories] ***********************************************************************************************
2022-07-10 22:36:23,523 p=12901 u=student n=ansible | changed: [controller]
2022-07-10 22:36:24,447 p=12901 u=student n=ansible | TASK [etcd : Copy Certs and Config to Controllers] **********************************************************************************
2022-07-10 22:36:24,447 p=12901 u=student n=ansible | changed: [controller] => (item={'source': '/home/student/k8s-certs/ca.pem', 'dest': '/etc/etcd//ca.pem', 'mode': '0664'})
2022-07-10 22:36:25,257 p=12901 u=student n=ansible | changed: [controller] => (item={'source': '/home/student/k8s-certs/kubernetes.pem', 'dest': '/etc/etcd//kubernetes.pem', 'mode': '0664'})
2022-07-10 22:36:26,078 p=12901 u=student n=ansible | changed: [controller] => (item={'source': '/home/student/k8s-certs/kubernetes-key.pem', 'dest': '/etc/etcd//kubernetes-key.pem', 'mode': '0600'})
2022-07-10 22:36:29,401 p=12901 u=student n=ansible | TASK [etcd : Unpack the etcd binaries on each controller] ***************************************************************************
2022-07-10 22:36:29,402 p=12901 u=student n=ansible | changed: [controller]
2022-07-10 22:36:30,049 p=12901 u=student n=ansible | TASK [etcd : Move etcd binaries to /usr/local/bin path] *****************************************************************************
2022-07-10 22:36:30,050 p=12901 u=student n=ansible | changed: [controller] => (item={'source': '/tmp/etcd-v3.5.2-linux-amd64/etcd', 'dest': '/usr/local/bin/etcd'})
2022-07-10 22:36:30,626 p=12901 u=student n=ansible | changed: [controller] => (item={'source': '/tmp/etcd-v3.5.2-linux-amd64/etcdctl', 'dest': '/usr/local/bin/etcdctl'})
2022-07-10 22:36:31,655 p=12901 u=student n=ansible | TASK [etcd : Push etcd service config] **********************************************************************************************
2022-07-10 22:36:31,656 p=12901 u=student n=ansible | changed: [controller]
2022-07-10 22:36:32,501 p=12901 u=student n=ansible | TASK [etcd : Reload systemd manager] ************************************************************************************************
2022-07-10 22:36:32,502 p=12901 u=student n=ansible | changed: [controller]
2022-07-10 22:36:34,742 p=12901 u=student n=ansible | TASK [etcd : Reload the daemon for the services] ************************************************************************************
2022-07-10 22:36:34,742 p=12901 u=student n=ansible | changed: [controller]
2022-07-10 22:36:34,799 p=12901 u=student n=ansible | PLAY [deploy k8s controllers] *******************************************************************************************************
2022-07-10 22:36:35,995 p=12901 u=student n=ansible | TASK [Gathering Facts] **************************************************************************************************************
2022-07-10 22:36:35,995 p=12901 u=student n=ansible | ok: [controller]
2022-07-10 22:36:36,533 p=12901 u=student n=ansible | TASK [controller_install : Create k8s directories on controllers] *******************************************************************
2022-07-10 22:36:36,535 p=12901 u=student n=ansible | ok: [controller] => (item=/var/lib/etcd)
2022-07-10 22:36:36,979 p=12901 u=student n=ansible | changed: [controller] => (item=/var/lib/kubernetes)
2022-07-10 22:36:37,947 p=12901 u=student n=ansible | TASK [controller_install : Copy Certs and Config to Controllers] ********************************************************************
2022-07-10 22:36:37,948 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/ca.pem', 'dest': '/var/lib/kubernetes/ca.pem', 'mode': '0664'})
2022-07-10 22:36:38,751 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/ca-key.pem', 'dest': '/var/lib/kubernetes/ca-key.pem', 'mode': '0600'})
2022-07-10 22:36:39,614 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/kubernetes.pem', 'dest': '/var/lib/kubernetes/kubernetes.pem', 'mode': '0664'})
2022-07-10 22:36:40,462 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/kubernetes-key.pem', 'dest': '/var/lib/kubernetes/kubernetes-key.pem', 'mode': '0600'})
2022-07-10 22:36:41,249 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-config/encryption-config.yaml', 'dest': '/var/lib/kubernetes/encryption-config.yaml', 'mode': '0600'})
2022-07-10 22:36:42,065 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-config/kube-scheduler.yaml', 'dest': '/var/lib/kubernetes/kube-scheduler.yaml', 'mode': '0664'})
2022-07-10 22:36:42,915 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-config/kube-scheduler.kubeconfig', 'dest': '/var/lib/kubernetes/kube-scheduler.kubeconfig', 'mode': '0664'})
2022-07-10 22:36:43,738 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-config/kube-controller-manager.kubeconfig', 'dest': '/var/lib/kubernetes/kube-controller-manager.kubeconfig', 'mode': '0664'})
2022-07-10 22:36:44,563 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/kube-controller-manager-key.pem', 'dest': '/var/lib/kubernetes/kube-controller-manager-key.pem', 'mode': '0600'})
2022-07-10 22:36:45,366 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/kube-controller-manager.pem', 'dest': '/var/lib/kubernetes/kube-controller-manager.pem', 'mode': '0664'})
2022-07-10 22:36:46,169 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/front-proxy-client-key.pem', 'dest': '/var/lib/kubernetes/front-proxy-client-key.pem', 'mode': '0600'})
2022-07-10 22:36:46,980 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/front-proxy-client.pem', 'dest': '/var/lib/kubernetes/front-proxy-client.pem', 'mode': '0664'})
2022-07-10 22:36:47,792 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/service-account-key.pem', 'dest': '/var/lib/kubernetes/service-account-key.pem', 'mode': '0600'})
2022-07-10 22:36:48,602 p=12901 u=student n=ansible | changed: [controller] => (item={'src': '/home/student/k8s-certs/service-account.pem', 'dest': '/var/lib/kubernetes/service-account.pem', 'mode': '0664'})
2022-07-10 22:36:51,949 p=12901 u=student n=ansible | TASK [controller_install : Download the controller service binaries] ****************************************************************
2022-07-10 22:36:51,950 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes API Server -> /usr/local/bin/kube-apiserver)
2022-07-10 22:36:55,162 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes Manager -> /usr/local/bin/kube-controller-manager)
2022-07-10 22:36:57,054 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes Scheduler -> /usr/local/bin/kube-scheduler)
2022-07-10 22:36:58,007 p=12901 u=student n=ansible | TASK [controller_install : Push the config files for the controller services] *******************************************************
2022-07-10 22:36:58,008 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes API Server -> /etc/systemd/system/kube-apiserver.service)
2022-07-10 22:36:58,841 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes Manager -> /etc/systemd/system/kube-controller-manager.service)
2022-07-10 22:36:59,643 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes Scheduler -> /etc/systemd/system/kube-scheduler.service)
2022-07-10 22:37:01,225 p=12901 u=student n=ansible | TASK [controller_install : Download Kubernetes kubectl] *****************************************************************************
2022-07-10 22:37:01,226 p=12901 u=student n=ansible | changed: [controller] => (item={'url': 'https://storage.googleapis.com/kubernetes-release/release/v1.23.4/bin/linux/amd64/kubectl', 'dest': '/usr/local/bin/kubectl', 'mode': '0755'})
2022-07-10 22:37:02,296 p=12901 u=student n=ansible | TASK [controller_install : Reload systemd manager] **********************************************************************************
2022-07-10 22:37:02,298 p=12901 u=student n=ansible | ok: [controller]
2022-07-10 22:37:03,330 p=12901 u=student n=ansible | TASK [controller_install : Reload the daemon for the services] **********************************************************************
2022-07-10 22:37:03,331 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes API Server Service -> kube-apiserver)
2022-07-10 22:37:04,419 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes Manager Service -> kube-controller-manager)
2022-07-10 22:37:05,588 p=12901 u=student n=ansible | changed: [controller] => (item=Kubernetes Scheduler Service -> kube-scheduler)
2022-07-10 22:37:05,656 p=16228 u=student n=ansible | Pausing for 15 seconds
2022-07-10 22:37:05,657 p=16228 u=student n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2022-07-10 22:37:20,661 p=12901 u=student n=ansible | TASK [controller_install : Allow Kubernetes API Server to fully initialize] *********************************************************
2022-07-10 22:37:20,662 p=12901 u=student n=ansible | ok: [controller]
2022-07-10 22:37:21,623 p=12901 u=student n=ansible | TASK [controller_install : Create a route from controllers to the service ip cidr] **************************************************
2022-07-10 22:37:21,623 p=12901 u=student n=ansible | changed: [controller]
2022-07-10 22:37:22,096 p=12901 u=student n=ansible | TASK [controller_install : execute ifup script to insert route from controllers to service ip cidr] *********************************
2022-07-10 22:37:22,096 p=12901 u=student n=ansible | changed: [controller]
2022-07-10 22:37:22,145 p=12901 u=student n=ansible | PLAY [deploy load balancers] ********************************************************************************************************
2022-07-10 22:37:23,458 p=12901 u=student n=ansible | TASK [nginx_localhost_load_balancer : Install nginx for localhost loadbalancing access to the HA controllers] ***********************
2022-07-10 22:37:23,458 p=12901 u=student n=ansible | ok: [localhost]
2022-07-10 22:37:36,398 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:37:36,522 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:37:37,278 p=12901 u=student n=ansible | TASK [nginx_localhost_load_balancer : Create the config file for nginx] *************************************************************
2022-07-10 22:37:37,279 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:37:37,466 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:37:37,531 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:37:38,804 p=12901 u=student n=ansible | TASK [nginx_localhost_load_balancer : Start the nginx service] **********************************************************************
2022-07-10 22:37:38,805 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:37:38,816 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:37:38,900 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:37:39,609 p=12901 u=student n=ansible | TASK [trusted_ca : Copy k8s CA] *****************************************************************************************************
2022-07-10 22:37:39,611 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:37:39,909 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:37:39,956 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:37:41,649 p=12901 u=student n=ansible | TASK [trusted_ca : Update Trusted Certificates] *************************************************************************************
2022-07-10 22:37:41,649 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:37:41,747 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:37:41,837 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:37:41,917 p=12901 u=student n=ansible | PLAY [configure rbac] ***************************************************************************************************************
2022-07-10 22:37:43,030 p=12901 u=student n=ansible | TASK [Gathering Facts] **************************************************************************************************************
2022-07-10 22:37:43,031 p=12901 u=student n=ansible | ok: [localhost]
2022-07-10 22:37:43,585 p=12901 u=student n=ansible | TASK [rbac : Copy rbac cluster-role to controllers] *********************************************************************************
2022-07-10 22:37:43,586 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:37:45,250 p=12901 u=student n=ansible | TASK [rbac : Apply the RBAC rules] **************************************************************************************************
2022-07-10 22:37:45,251 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:37:45,829 p=12901 u=student n=ansible | TASK [rbac : Copy the cluster role bind file to the controllers] ********************************************************************
2022-07-10 22:37:45,831 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:37:46,368 p=12901 u=student n=ansible | TASK [rbac : Bind the clusterrole to the kubernetes user.] **************************************************************************
2022-07-10 22:37:46,369 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:37:46,419 p=12901 u=student n=ansible | PLAY [deploy k8s nodes] *************************************************************************************************************
2022-07-10 22:37:46,943 p=12901 u=student n=ansible | TASK [node_install : create directories for the kubernetes nodes] *******************************************************************
2022-07-10 22:37:46,945 p=12901 u=student n=ansible | changed: [node-1] => (item=/etc/cni/net.d)
2022-07-10 22:37:47,046 p=12901 u=student n=ansible | changed: [node-2] => (item=/etc/cni/net.d)
2022-07-10 22:37:47,416 p=12901 u=student n=ansible | changed: [node-1] => (item=/opt/cni/bin)
2022-07-10 22:37:47,504 p=12901 u=student n=ansible | changed: [node-2] => (item=/opt/cni/bin)
2022-07-10 22:37:47,848 p=12901 u=student n=ansible | changed: [node-1] => (item=/var/lib/kubelet)
2022-07-10 22:37:47,958 p=12901 u=student n=ansible | changed: [node-2] => (item=/var/lib/kubelet)
2022-07-10 22:37:48,324 p=12901 u=student n=ansible | changed: [node-1] => (item=/var/lib/kube-proxy)
2022-07-10 22:37:48,436 p=12901 u=student n=ansible | changed: [node-2] => (item=/var/lib/kube-proxy)
2022-07-10 22:37:48,768 p=12901 u=student n=ansible | changed: [node-1] => (item=/var/lib/kubernetes)
2022-07-10 22:37:48,922 p=12901 u=student n=ansible | changed: [node-2] => (item=/var/lib/kubernetes)
2022-07-10 22:37:49,228 p=12901 u=student n=ansible | changed: [node-1] => (item=/var/run/kubernetes)
2022-07-10 22:37:49,359 p=12901 u=student n=ansible | changed: [node-2] => (item=/var/run/kubernetes)
2022-07-10 22:37:49,686 p=12901 u=student n=ansible | changed: [node-1] => (item=/etc/containerd/)
2022-07-10 22:37:49,801 p=12901 u=student n=ansible | changed: [node-2] => (item=/etc/containerd/)
2022-07-10 22:37:50,799 p=12901 u=student n=ansible | TASK [node_install : Copy Certs to Nodes] *******************************************************************************************
2022-07-10 22:37:50,799 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/ca.pem)
2022-07-10 22:37:50,845 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/ca.pem)
2022-07-10 22:37:51,654 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/ca-key.pem)
2022-07-10 22:37:51,660 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/ca-key.pem)
2022-07-10 22:37:52,441 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/kubernetes.pem)
2022-07-10 22:37:52,483 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/kubernetes.pem)
2022-07-10 22:37:53,285 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/kubernetes-key.pem)
2022-07-10 22:37:53,305 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/kubernetes-key.pem)
2022-07-10 22:37:54,142 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/encryption-config.yaml)
2022-07-10 22:37:54,234 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/encryption-config.yaml)
2022-07-10 22:37:54,964 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/kube-scheduler.yaml)
2022-07-10 22:37:55,062 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/kube-scheduler.yaml)
2022-07-10 22:37:55,789 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/kube-scheduler.kubeconfig)
2022-07-10 22:37:55,934 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/kube-scheduler.kubeconfig)
2022-07-10 22:37:56,658 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/kube-controller-manager.kubeconfig)
2022-07-10 22:37:56,814 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/kube-controller-manager.kubeconfig)
2022-07-10 22:37:57,487 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/kube-controller-manager-key.pem)
2022-07-10 22:37:57,687 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/kube-controller-manager-key.pem)
2022-07-10 22:37:58,369 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/kube-controller-manager.pem)
2022-07-10 22:37:58,494 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/kube-controller-manager.pem)
2022-07-10 22:37:59,244 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/front-proxy-client-key.pem)
2022-07-10 22:37:59,363 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/front-proxy-client-key.pem)
2022-07-10 22:38:00,119 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/front-proxy-client.pem)
2022-07-10 22:38:00,152 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/front-proxy-client.pem)
2022-07-10 22:38:00,938 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/service-account-key.pem)
2022-07-10 22:38:00,979 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/service-account-key.pem)
2022-07-10 22:38:01,742 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubernetes/service-account.pem)
2022-07-10 22:38:01,843 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubernetes/service-account.pem)
2022-07-10 22:38:02,785 p=12901 u=student n=ansible | TASK [node_install : Copy certs/keys/kubeconfigs to Nodes] **************************************************************************
2022-07-10 22:38:02,786 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubelet/node-1.pem)
2022-07-10 22:38:02,856 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubelet/node-2.pem)
2022-07-10 22:38:03,556 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubelet/node-1-key.pem)
2022-07-10 22:38:03,709 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubelet/node-2-key.pem)
2022-07-10 22:38:04,381 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kube-proxy/kubeconfig)
2022-07-10 22:38:04,539 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kube-proxy/kubeconfig)
2022-07-10 22:38:05,276 p=12901 u=student n=ansible | changed: [node-1] => (item=File = /var/lib/kubelet/kubeconfig)
2022-07-10 22:38:05,354 p=12901 u=student n=ansible | changed: [node-2] => (item=File = /var/lib/kubelet/kubeconfig)
2022-07-10 22:38:10,608 p=12901 u=student n=ansible | TASK [node_install : Install kubernetes apt dependencies on nodes] ******************************************************************
2022-07-10 22:38:10,609 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:38:11,275 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:38:12,966 p=12901 u=student n=ansible | TASK [node_install : Download Kubernetes kubectl] ***********************************************************************************
2022-07-10 22:38:12,967 p=12901 u=student n=ansible | changed: [node-1] => (item={'url': 'https://storage.googleapis.com/kubernetes-release/release/v1.23.4/bin/linux/amd64/kubectl', 'dest': '/usr/local/bin/kubectl', 'mode': '0755'})
2022-07-10 22:38:13,129 p=12901 u=student n=ansible | changed: [node-2] => (item={'url': 'https://storage.googleapis.com/kubernetes-release/release/v1.23.4/bin/linux/amd64/kubectl', 'dest': '/usr/local/bin/kubectl', 'mode': '0755'})
2022-07-10 22:38:15,266 p=12901 u=student n=ansible | TASK [node_install : Download the Node binaries] ************************************************************************************
2022-07-10 22:38:15,267 p=12901 u=student n=ansible | changed: [node-1] => (item=k8s v1.23.4 - /usr/local/bin/kube-proxy)
2022-07-10 22:38:15,425 p=12901 u=student n=ansible | changed: [node-2] => (item=k8s v1.23.4 - /usr/local/bin/kube-proxy)
2022-07-10 22:38:18,682 p=12901 u=student n=ansible | changed: [node-1] => (item=k8s v1.23.4 - /usr/local/bin/kubelet)
2022-07-10 22:38:18,808 p=12901 u=student n=ansible | changed: [node-2] => (item=k8s v1.23.4 - /usr/local/bin/kubelet)
2022-07-10 22:38:19,917 p=12901 u=student n=ansible | changed: [node-2] => (item=k8s v1.23.4 - /usr/local/bin/runsc)
2022-07-10 22:38:19,926 p=12901 u=student n=ansible | changed: [node-1] => (item=k8s v1.23.4 - /usr/local/bin/runsc)
2022-07-10 22:38:20,969 p=12901 u=student n=ansible | changed: [node-1] => (item=k8s v1.23.4 - /usr/local/bin/runc)
2022-07-10 22:38:21,366 p=12901 u=student n=ansible | changed: [node-2] => (item=k8s v1.23.4 - /usr/local/bin/runc)
2022-07-10 22:38:21,639 p=12901 u=student n=ansible | ok: [node-1] => (item=k8s v1.23.4 - /usr/local/bin/kubectl)
2022-07-10 22:38:22,046 p=12901 u=student n=ansible | ok: [node-2] => (item=k8s v1.23.4 - /usr/local/bin/kubectl)
2022-07-10 22:38:24,982 p=12901 u=student n=ansible | TASK [node_install : Download and unarchive Node dependencies] **********************************************************************
2022-07-10 22:38:24,982 p=12901 u=student n=ansible | changed: [node-1] => (item=crictl)
2022-07-10 22:38:25,075 p=12901 u=student n=ansible | changed: [node-2] => (item=crictl)
2022-07-10 22:38:30,277 p=12901 u=student n=ansible | changed: [node-1] => (item=cni-plugins)
2022-07-10 22:38:30,730 p=12901 u=student n=ansible | changed: [node-2] => (item=cni-plugins)
2022-07-10 22:38:37,339 p=12901 u=student n=ansible | changed: [node-2] => (item=containerd)
2022-07-10 22:38:37,726 p=12901 u=student n=ansible | changed: [node-1] => (item=containerd)
2022-07-10 22:38:38,873 p=12901 u=student n=ansible | TASK [node_install : Create the 99-loopback.conf file for each node.] ***************************************************************
2022-07-10 22:38:38,874 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:38:38,979 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:38:39,650 p=12901 u=student n=ansible | TASK [node_install : Enable br_netfilter kernel module] *****************************************************************************
2022-07-10 22:38:39,651 p=12901 u=student n=ansible | changed: [node-1] => (item=br_netfilter)
2022-07-10 22:38:39,666 p=12901 u=student n=ansible | changed: [node-2] => (item=br_netfilter)
2022-07-10 22:38:40,097 p=12901 u=student n=ansible | changed: [node-1] => (item=overlay)
2022-07-10 22:38:40,121 p=12901 u=student n=ansible | changed: [node-2] => (item=overlay)
2022-07-10 22:38:40,810 p=12901 u=student n=ansible | TASK [node_install : Enable packet forwarding on the node] **************************************************************************
2022-07-10 22:38:40,812 p=12901 u=student n=ansible | changed: [node-1] => (item=net.ipv4.ip_forward)
2022-07-10 22:38:40,831 p=12901 u=student n=ansible | changed: [node-2] => (item=net.ipv4.ip_forward)
2022-07-10 22:38:41,227 p=12901 u=student n=ansible | changed: [node-2] => (item=net.bridge.bridge-nf-call-iptables)
2022-07-10 22:38:41,245 p=12901 u=student n=ansible | changed: [node-1] => (item=net.bridge.bridge-nf-call-iptables)
2022-07-10 22:38:41,671 p=12901 u=student n=ansible | changed: [node-1] => (item=net.bridge.bridge-nf-call-ip6tables)
2022-07-10 22:38:41,700 p=12901 u=student n=ansible | changed: [node-2] => (item=net.bridge.bridge-nf-call-ip6tables)
2022-07-10 22:38:42,538 p=12901 u=student n=ansible | TASK [node_install : Persist br_netfilter kernell module loading (on reboot)] *******************************************************
2022-07-10 22:38:42,540 p=12901 u=student n=ansible | changed: [node-1] => (item=br_netfilter)
2022-07-10 22:38:42,592 p=12901 u=student n=ansible | changed: [node-2] => (item=br_netfilter)
2022-07-10 22:38:43,368 p=12901 u=student n=ansible | changed: [node-1] => (item=overlay)
2022-07-10 22:38:43,393 p=12901 u=student n=ansible | changed: [node-2] => (item=overlay)
2022-07-10 22:38:44,267 p=12901 u=student n=ansible | TASK [node_install : Create node configuration files] *******************************************************************************
2022-07-10 22:38:44,267 p=12901 u=student n=ansible | changed: [node-1] => (item=containerd)
2022-07-10 22:38:44,301 p=12901 u=student n=ansible | changed: [node-2] => (item=containerd)
2022-07-10 22:38:45,132 p=12901 u=student n=ansible | changed: [node-1] => (item=kubelet-config)
2022-07-10 22:38:45,136 p=12901 u=student n=ansible | changed: [node-2] => (item=kubelet-config)
2022-07-10 22:38:45,949 p=12901 u=student n=ansible | changed: [node-1] => (item=kube-proxy)
2022-07-10 22:38:45,990 p=12901 u=student n=ansible | changed: [node-2] => (item=kube-proxy)
2022-07-10 22:38:46,856 p=12901 u=student n=ansible | TASK [node_install : Create the containerd service (systemd) file] ******************************************************************
2022-07-10 22:38:46,857 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:38:46,987 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:38:47,859 p=12901 u=student n=ansible | TASK [node_install : Update the containerd config file] *****************************************************************************
2022-07-10 22:38:47,859 p=12901 u=student n=ansible | changed: [node-1]
2022-07-10 22:38:47,960 p=12901 u=student n=ansible | changed: [node-2]
2022-07-10 22:38:48,888 p=12901 u=student n=ansible | TASK [node_install : Create the node services config files for each node] ***********************************************************
2022-07-10 22:38:48,889 p=12901 u=student n=ansible | changed: [node-1] => (item=/etc/systemd/system/kube-proxy.service)
2022-07-10 22:38:48,967 p=12901 u=student n=ansible | changed: [node-2] => (item=/etc/systemd/system/kube-proxy.service)
2022-07-10 22:38:49,789 p=12901 u=student n=ansible | changed: [node-1] => (item=/etc/systemd/system/kubelet.service)
2022-07-10 22:38:49,823 p=12901 u=student n=ansible | changed: [node-2] => (item=/etc/systemd/system/kubelet.service)
2022-07-10 22:38:50,547 p=12901 u=student n=ansible | ok: [node-1] => (item=/etc/systemd/system/containerd.service)
2022-07-10 22:38:50,616 p=12901 u=student n=ansible | ok: [node-2] => (item=/etc/systemd/system/containerd.service)
2022-07-10 22:38:51,692 p=12901 u=student n=ansible | TASK [node_install : Reload systemctl daemons] **************************************************************************************
2022-07-10 22:38:51,693 p=12901 u=student n=ansible | ok: [node-2]
2022-07-10 22:38:51,777 p=12901 u=student n=ansible | ok: [node-1]
2022-07-10 22:38:52,972 p=12901 u=student n=ansible | TASK [node_install : Enable k8s services] *******************************************************************************************
2022-07-10 22:38:52,973 p=12901 u=student n=ansible | changed: [node-2] => (item={'name': 'kube-proxy', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/kube-proxy.service.j2', 'service_path': '/etc/systemd/system/kube-proxy.service'})
2022-07-10 22:38:52,981 p=12901 u=student n=ansible | changed: [node-1] => (item={'name': 'kube-proxy', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/kube-proxy.service.j2', 'service_path': '/etc/systemd/system/kube-proxy.service'})
2022-07-10 22:38:54,071 p=12901 u=student n=ansible | changed: [node-1] => (item={'name': 'kubelet', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/kubelet.service.j2', 'service_path': '/etc/systemd/system/kubelet.service'})
2022-07-10 22:38:54,185 p=12901 u=student n=ansible | changed: [node-2] => (item={'name': 'kubelet', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/kubelet.service.j2', 'service_path': '/etc/systemd/system/kubelet.service'})
2022-07-10 22:38:55,131 p=12901 u=student n=ansible | changed: [node-1] => (item={'name': 'containerd', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/containerd.service.j2', 'service_path': '/etc/systemd/system/containerd.service'})
2022-07-10 22:38:55,166 p=12901 u=student n=ansible | changed: [node-2] => (item={'name': 'containerd', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/containerd.service.j2', 'service_path': '/etc/systemd/system/containerd.service'})
2022-07-10 22:38:55,911 p=12901 u=student n=ansible | TASK [node_install : Restart the k8s services] **************************************************************************************
2022-07-10 22:38:55,914 p=12901 u=student n=ansible | changed: [node-1] => (item={'name': 'kube-proxy', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/kube-proxy.service.j2', 'service_path': '/etc/systemd/system/kube-proxy.service'})
2022-07-10 22:38:55,972 p=12901 u=student n=ansible | changed: [node-2] => (item={'name': 'kube-proxy', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/kube-proxy.service.j2', 'service_path': '/etc/systemd/system/kube-proxy.service'})
2022-07-10 22:38:56,629 p=12901 u=student n=ansible | changed: [node-1] => (item={'name': 'kubelet', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/kubelet.service.j2', 'service_path': '/etc/systemd/system/kubelet.service'})
2022-07-10 22:38:56,678 p=12901 u=student n=ansible | changed: [node-2] => (item={'name': 'kubelet', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/kubelet.service.j2', 'service_path': '/etc/systemd/system/kubelet.service'})
2022-07-10 22:39:01,897 p=12901 u=student n=ansible | changed: [node-1] => (item={'name': 'containerd', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/containerd.service.j2', 'service_path': '/etc/systemd/system/containerd.service'})
2022-07-10 22:39:01,966 p=12901 u=student n=ansible | changed: [node-2] => (item={'name': 'containerd', 'service_j2': '/home/student/git/kubernetes-the-alta3-way/roles/node_install/templates/containerd.service.j2', 'service_path': '/etc/systemd/system/containerd.service'})
2022-07-10 22:39:02,030 p=19057 u=student n=ansible | Pausing for 15 seconds
2022-07-10 22:39:02,031 p=19057 u=student n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2022-07-10 22:39:17,035 p=12901 u=student n=ansible | TASK [node_install : Allow Kubernetes Nodes services to fully initialize] ***********************************************************
2022-07-10 22:39:17,036 p=12901 u=student n=ansible | ok: [node-1]
2022-07-10 22:39:17,117 p=12901 u=student n=ansible | PLAY [deploy k8s services] **********************************************************************************************************
2022-07-10 22:39:17,770 p=12901 u=student n=ansible | TASK [calico : Generate a calico installation yaml files] ***************************************************************************
2022-07-10 22:39:17,771 p=12901 u=student n=ansible | changed: [localhost] => (item={'src': '/home/student/git/kubernetes-the-alta3-way/roles/calico/templates/calico.yaml.j2', 'dest': '/home/student/k8s-config/calico.yaml'})
2022-07-10 22:39:18,738 p=12901 u=student n=ansible | TASK [calico : Apply calico service] ************************************************************************************************
2022-07-10 22:39:18,739 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:39:18,784 p=19129 u=student n=ansible | Pausing for 15 seconds
2022-07-10 22:39:18,785 p=19129 u=student n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2022-07-10 22:39:33,790 p=12901 u=student n=ansible | TASK [calico : Allow Calico Nodes services to fully initialize] *********************************************************************
2022-07-10 22:39:33,791 p=12901 u=student n=ansible | ok: [localhost]
2022-07-10 22:39:34,396 p=12901 u=student n=ansible | TASK [kube-dns : Generate cluster dns installation yaml file] ***********************************************************************
2022-07-10 22:39:34,397 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:39:35,066 p=12901 u=student n=ansible | TASK [kube-dns : Apply cluser dns service] ******************************************************************************************
2022-07-10 22:39:35,067 p=12901 u=student n=ansible | changed: [localhost]
2022-07-10 22:39:35,132 p=12901 u=student n=ansible | PLAY RECAP **************************************************************************************************************************
2022-07-10 22:39:35,133 p=12901 u=student n=ansible | bchd                       : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2022-07-10 22:39:35,133 p=12901 u=student n=ansible | controller                 : ok=20   changed=15   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2022-07-10 22:39:35,133 p=12901 u=student n=ansible | localhost                  : ok=52   changed=45   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2022-07-10 22:39:35,134 p=12901 u=student n=ansible | node-1                     : ok=25   changed=22   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2022-07-10 22:39:35,134 p=12901 u=student n=ansible | node-2                     : ok=24   changed=22   unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
